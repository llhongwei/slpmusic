(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-a345a596"],{"026a":function(t,e,s){"use strict";s("d721")},1784:function(t,e,s){},"3f69":function(t,e,s){"use strict";s.r(e);var n=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("transition",{attrs:{name:t.transitionName}},[s("div",[s("scroll",{ref:"scroll",staticClass:"main-scroll",attrs:{list:t.searchList,pullUpLoad:!0},on:{pullingUp:t.pullingUp}},[s("div",{staticClass:"search"},[s("search-box",{ref:"searchs",attrs:{hotKeyWord:t.hotKeyWord},on:{searchClick:t.search}}),0===t.searchList.length?s("search-hots",{attrs:{hotKeyWord:t.hotKeyWord},on:{searchClick:t.search}}):s("search-list",{attrs:{list:t.searchList,tips:t.tips}})],1)])],1)])},r=[],a=s("1da1"),i=(s("d81d"),s("b0c0"),s("96cf"),function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"search-box"},[n("input",{directives:[{name:"model",rawName:"v-model",value:t.keyWord,expression:"keyWord"}],attrs:{type:"search",placeholder:t.defaultKey},domProps:{value:t.keyWord},on:{input:function(e){e.target.composing||(t.keyWord=e.target.value)}}}),n("img",{attrs:{src:s("6f6b")},on:{click:t.searchClick}})])}),c=[],o={name:"SearchBox",data:function(){return{keyWord:null,defaultKey:null}},props:{hotKeyWord:{type:Array,default:function(){return[]}}},methods:{searchClick:function(){null!==this.keyWord&&""!==this.keyWord||(this.keyWord=this.defaultKey),this.$emit("searchClick",this.keyWord),this.getKeyWord()},getKeyWord:function(){var t=Math.floor(10*Math.random());this.defaultKey=this.hotKeyWord[t].first}},watch:{hotKeyWord:function(){this.$nextTick((function(){this.getKeyWord()}))}}},l=o,d=(s("026a"),s("2877")),u=Object(d["a"])(l,i,c,!1,null,"6b24d297",null),h=u.exports,f=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-list"},[s("h4",[t._v("搜索列表")]),t._l(t.list,(function(e){return s("div",{key:e.id,staticClass:"search-list-item"},[s("div",{staticClass:"search-list-item-detail",on:{click:function(s){return t.addAndPlay(e)}}},[s("p",{staticClass:"search-item-name"},[t._v(t._s(e.name))]),s("p",{staticClass:"search-item-album"},[t._v(t._s(t._f("artists")(e.ar))+t._s("-"+e.album))])]),s("div",{staticClass:"add-song",on:{click:function(s){return t.addSong(e)}}},[s("span",[t._v("+")])])])})),s("p",{staticClass:"tips"},[t._v(t._s(t.tips))])],2)},m=[],p=s("5530"),y=s("2f62"),g={name:"SearchList",props:{list:{type:Array,default:function(){return[]}},tips:{type:String,default:"正在加载"}},methods:Object(p["a"])(Object(p["a"])({addAndPlay:function(t){var e=this;this.addPlaySong(t),-1===this.atIndex?this.addAndPlaySong(this.currentIndex+1):this.$dialog.confirm({title:t.name,message:"在播放列表中已存在，是否播放？",confirmButtonColor:"orangered"}).then((function(){e.addAndPlaySong(e.atIndex),e.setAtIndex(-1)})).catch((function(){e.setAtIndex(-1)}))},addSong:function(t){var e=this;this.addPlaySong(t),-1!=this.atIndex?this.$dialog.confirm({title:t.name,message:"在播放列表中已存在，是否播放？",confirmButtonColor:"orangered"}).then((function(){e.addAndPlaySong(e.atIndex),e.setAtIndex(-1)})).catch((function(){e.setAtIndex(-1)})):this.$toast.success({message:"添加成功",duration:500})}},Object(y["d"])({addPlaySong:"ADD_PLAY_SONG",setAtIndex:"SET_AT_INDEX"})),Object(y["b"])(["addAndPlaySong"])),computed:Object(p["a"])({},Object(y["c"])(["currentIndex","atIndex","currentSong"])),filters:{artists:function(t){for(var e="",s=0;s<t.length;s++)s+1!=t.length?e=e+t[s].name+"/":e+=t[s].name;return e}}},v=g,k=(s("484a"),Object(d["a"])(v,f,m,!1,null,"17c1e8da",null)),x=k.exports,b=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"search-hots"},[s("h3",[t._v("热搜榜")]),s("div",{staticClass:"hot-list"},t._l(t.hotKeyWord,(function(e,n){return s("div",{key:n,staticClass:"hot-list-item",on:{click:function(s){return t.searchClick(e.first)}}},[s("span",{staticClass:"hot-num"},[t._v(t._s(n+1))]),s("p",{staticClass:"hot-names"},[t._v(t._s(e.first))])])})),0)])},W=[],_={name:"SearchHots",props:{hotKeyWord:{type:Array,default:function(){return[]}}},methods:{searchClick:function(t){this.$emit("searchClick",t)}}},C=_,S=(s("e453"),Object(d["a"])(C,b,W,!1,null,"fd72824c",null)),K=S.exports,A=s("d529"),$=s("eecb"),w={name:"Search",data:function(){return{hotKeyWord:[],searchList:[],limit:20,tips:"上拉加载",keyWord:null}},components:{SearchBox:h,SearchList:x,SearchHots:K,Scroll:A["a"]},mixins:[$["a"]],methods:{gethotKeyWord:function(){var t=this;return Object(a["a"])(regeneratorRuntime.mark((function e(){var s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.$https.get("/search/hot");case 2:s=e.sent,t.hotKeyWord=s.data.result.hots;case 4:case"end":return e.stop()}}),e)})))()},getSearchList:function(t){var e=this;return Object(a["a"])(regeneratorRuntime.mark((function s(){var n;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,e.$https.get("/search?keywords="+t+"&limit="+e.limit);case 2:n=s.sent,e.searchList=n.data.result.songs.map((function(t){return{id:t.id,name:t.name,ar:t.artists,album:t.album.name}})),e.limit+=20;case 5:case"end":return s.stop()}}),s)})))()},search:function(t){this.limit=20,this.getSearchList(t),this.keyWord=t,this.$refs.searchs.keyWord=t,this.tips="上拉加载",this.$refs.scroll.finishPullUp()},pullingUp:function(){this.limit<=100?(this.getSearchList(this.keyWord),this.$refs.scroll.finishPullUp()):this.tips="已经到底了"}},created:function(){this.gethotKeyWord()}},I=w,L=Object(d["a"])(I,n,r,!1,null,null,null);e["default"]=L.exports},"484a":function(t,e,s){"use strict";s("5861")},5861:function(t,e,s){},"6f6b":function(t,e,s){t.exports=s.p+"img/search.3f350742.svg"},d721:function(t,e,s){},d81d:function(t,e,s){"use strict";var n=s("23e7"),r=s("b727").map,a=s("1dde"),i=a("map");n({target:"Array",proto:!0,forced:!i},{map:function(t){return r(this,t,arguments.length>1?arguments[1]:void 0)}})},e453:function(t,e,s){"use strict";s("1784")},eecb:function(t,e,s){"use strict";s.d(e,"a",(function(){return n}));var n={data:function(){return{transitionName:""}},beforeRouteLeave:function(t,e,s){t.meta.index>e.meta.index?this.transitionName="first":this.transitionName="second",setTimeout((function(){s()}))},activated:function(){this.$refs.scroll.refresh()}}}}]);
//# sourceMappingURL=chunk-a345a596.dfce4ffc.js.map